<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monitoring and Alerting Configuration - Care Commons Documentation</title>
  <meta name="description" content="Comprehensive documentation for Care Commons - Shared care software, community owned">
  <link rel="stylesheet" href="./styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      hljs.highlightAll();
      
      // Mobile menu toggle
      const menuToggle = document.querySelector('.menu-toggle');
      const sidebar = document.querySelector('.sidebar');
      if (menuToggle && sidebar) {
        menuToggle.addEventListener('click', () => {
          sidebar.classList.toggle('open');
        });
      }
      
      // Search functionality
      const searchInput = document.getElementById('search-input');
      const searchResults = document.getElementById('search-results');
      
      if (searchInput && searchResults) {
        searchInput.addEventListener('input', (e) => {
          const query = e.target.value.toLowerCase();
          if (query.length < 2) {
            searchResults.innerHTML = '';
            searchResults.style.display = 'none';
            return;
          }
          
          // Simple search through navigation items
          const navItems = document.querySelectorAll('.sidebar a');
          const matches = Array.from(navItems)
            .filter(item => item.textContent.toLowerCase().includes(query))
            .slice(0, 10);
          
          if (matches.length > 0) {
            searchResults.innerHTML = matches
              .map(item => `<a href="${item.href}" class="search-result">${item.textContent}</a>`)
              .join('');
            searchResults.style.display = 'block';
          } else {
            searchResults.innerHTML = '<div class="search-result no-results">No results found</div>';
            searchResults.style.display = 'block';
          }
        });
        
        // Hide results when clicking outside
        document.addEventListener('click', (e) => {
          if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
            searchResults.style.display = 'none';
          }
        });
      }
    });
  </script>
</head>
<body>
  <div class="container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1><a href="./index.html">Care Commons Docs</a></h1>
        <button class="menu-toggle" aria-label="Toggle menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
      <div class="search-container">
        <input type="text" id="search-input" placeholder="Search documentation..." />
        <div id="search-results"></div>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-category">
      <h3>üöÄ Getting Started</h3>
      <ul><li><a href="./api-readme.html">API Directory - Vercel Serverless Functions</a></li><li><a href="./claude-layer-2-input-readme.html">Layer 2 Implementation Tasks</a></li><li><a href="./claude-readme.html">Claude Autonomous Task Management System</a></li><li><a href="./database-quickstart.html">Database Quick Start</a></li><li><a href="./demo-quickstart.html">Rich Interactive Demo - Quick Start Guide</a></li><li><a href="./deployment-quick-start.html">Deployment Quick Start Guide</a></li><li><a href="./deployment-quickstart.html">Deployment Quick Start</a></li><li><a href="./docs-compliance-readme.html">State Compliance Documentation</a></li><li><a href="./e2e-readme.html">Care Commons: End-to-End Testing Guide</a></li><li><a href="./packages-mobile-quickstart-mobile.html">Mobile App Quick Start Guide</a></li><li><a href="./packages-mobile-quickstart.html">Mobile App Quickstart Guide</a></li><li><a href="./packages-web-quickstart.html">Quick Start Guide</a></li><li><a href="./readme.html">Care Commons</a></li><li><a href="./scripts-readme.html">Care Commons Deployment Scripts</a></li><li><a href="./showcase-quick-start.html">Showcase Quick Start Guide</a></li><li><a href="./showcase-readme.html">Care Commons Showcase</a></li><li><a href="./vercel-quickstart.html">Vercel Environment Setup - Quick Start</a></li><li><a href="./verticals-analytics-reporting-readme.html">Analytics & Reporting Vertical</a></li><li><a href="./verticals-billing-invoicing-readme.html">Billing & Invoicing</a></li><li><a href="./verticals-care-plans-tasks-quickstart.html">Care Plans & Tasks Library - Quickstart</a></li><li><a href="./verticals-care-plans-tasks-readme.html">Care Plans & Tasks Library</a></li><li><a href="./verticals-caregiver-staff-quickstart.html">Caregiver & Staff Management - Quick Start</a></li><li><a href="./verticals-caregiver-staff-readme.html">Caregiver & Staff Management</a></li><li><a href="./verticals-client-demographics-readme.html">Client & Demographics Management</a></li><li><a href="./verticals-family-engagement-readme.html">Family Engagement Platform (Consolidated)</a></li><li><a href="./verticals-payroll-processing-readme.html">Payroll Processing</a></li><li><a href="./verticals-quality-assurance-audits-readme.html">Quality Assurance & Audits Vertical</a></li><li><a href="./verticals-scheduling-visits-quickstart.html">Quickstart: Scheduling & Visit Management</a></li><li><a href="./verticals-scheduling-visits-readme.html">Scheduling & Visit Management</a></li><li><a href="./verticals-shift-matching-readme.html">Shift Matching & Assignment</a></li><li><a href="./verticals-time-tracking-evv-quickstart.html">Time Tracking & EVV - Quick Start Guide</a></li><li><a href="./verticals-time-tracking-evv-readme.html">Time Tracking & Electronic Visit Verification (EVV)</a></li></ul></div><div class="nav-category">
      <h3>üìñ User Guides</h3>
      <ul><li><a href="./claude-0002-fix-client-demographics-api-error.html">Task 0002: Fix Client Demographics API Type Error</a></li><li><a href="./docs-deployment-guide.html">Care Commons Deployment Guide</a></li><li><a href="./docs-performance-optimization-guide.html">Performance Optimization Guide</a></li><li><a href="./packages-web-src-showcase-readme.html">Care Commons Showcase Enhancements</a></li><li><a href="./rich-demo-implementation-plan.html">Rich Interactive Demo Implementation Plan</a></li><li><a href="./showcase-demo-data-implementation.html">Showcase Demo Data Implementation</a></li><li><a href="./showcase.html">Care Commons Platform - Interactive Showcase</a></li><li><a href="./showcase-part3-summary.html">Showcase Part 3: Multi-Role Experience Implementation</a></li><li><a href="./sync-integration-guide.html">Offline-First Sync Integration Guide</a></li><li><a href="./verticals-care-plans-tasks-demo.html">Care Plans & Tasks Library - Demo Guide</a></li><li><a href="./verticals-client-demographics-changelog.html">Changelog - Client & Demographics Management</a></li><li><a href="./verticals-client-demographics-examples.html">Client & Demographics - Usage Examples</a></li><li><a href="./verticals-client-demographics-migration.html">Migration Guide - Client & Demographics Management</a></li><li><a href="./verticals-scheduling-visits-wiring-guide.html">Scheduling Service Wiring Guide</a></li><li><a href="./verticals-shift-matching-demo.html">Shift Matching & Assignment Demo</a></li><li><a href="./verticals-time-tracking-evv-migration-guide.html">Migration Guide: TX/FL to Multi-State EVV</a></li><li><a href="./verticals-time-tracking-evv-multistate-guide.html">Multi-State EVV Integration Guide</a></li></ul></div><div class="nav-category">
      <h3>üèóÔ∏è Architecture & Deployment</h3>
      <ul><li><a href="./github-pull-request-template-mobile-pr-template.html">Mobile Pr Template</a></li><li><a href="./github-workflows-deployment-diagram.html">Deployment Flow Diagram</a></li><li><a href="./github-workflows-deployment-flow.html">Deployment Workflow Guide</a></li><li><a href="./autonomous-session-summary.html">Autonomous Development Session Summary</a></li><li><a href="./claude-layer-1-memory.html">Care Commons - Central Planner Vision & State</a></li><li><a href="./cloudflare-deployment.html">Cloudflare Deployment Guide</a></li><li><a href="./deployment-options.html">Deployment Options for Care Commons</a></li><li><a href="./deployment-quick-reference.html">Deployment Quick Reference</a></li><li><a href="./deployment-ready.html">‚úÖ Deployment Ready - Care Commons Platform</a></li><li><a href="./deployment.html">Cloud Deployment Guide</a></li><li><a href="./docs-compliance-index.html">State Compliance Documentation</a></li><li><a href="./docs-compliance-project-summary.html">State Compliance Documentation System - Project Summary</a></li><li><a href="./docs-deployment-setup-complete.html">Complete Deployment Setup Guide for Care Commons</a></li><li><a href="./docs-runbooks-manual-deployment.html">Manual Deployment Runbook</a></li><li><a href="./hardening-summary.html">Codebase Hardening Summary</a></li><li><a href="./implementation-complete-final.html">React Native Mobile Foundation - COMPLETE ‚úÖ</a></li><li><a href="./implementation-note.html">ML-Based Shift Matching Implementation</a></li><li><a href="./offline-first-architecture.html">Offline-First Architecture Implementation</a></li><li><a href="./offline-first-implementation-summary.html">Offline-First Architecture - Implementation Summary</a></li><li><a href="./packages-app-readme.html">Care Commons API Server</a></li><li><a href="./packages-core-src-compliance-readme.html">Multi-State Compliance System</a></li><li><a href="./packages-mobile-deployment-checklist.html">Mobile App Deployment Checklist</a></li><li><a href="./packages-mobile-implementation-summary.html">React Native Mobile Foundation - Implementation Summary</a></li><li><a href="./packages-mobile-mobile-foundation-summary.html">React Native Mobile Foundation - Implementation Summary</a></li><li><a href="./packages-shared-components-readme.html">@care-commons/shared-components</a></li><li><a href="./packages-web-architecture.html">Web Architecture</a></li><li><a href="./packages-web-readme.html">Care Commons Web UI</a></li><li><a href="./production-deployment.html">Production Deployment Guide - Vercel</a></li><li><a href="./pull-request-summary.html">Pull Request: Offline-First Synchronization System</a></li><li><a href="./tx-fl-implementation-summary.html">Texas and Florida State-Specific Implementation Summary</a></li><li><a href="./verticals-billing-invoicing-implementation-summary.html">Billing & Invoicing - Implementation Summary</a></li><li><a href="./verticals-care-plans-tasks-summary.html">Care Plans & Tasks Library - Implementation Summary</a></li><li><a href="./verticals-scheduling-visits-implementation.html">Implementation: Scheduling & Visit Management</a></li><li><a href="./verticals-scheduling-visits-summary.html">Scheduling & Visit Management - Implementation Summary</a></li><li><a href="./verticals-time-tracking-evv-changelog.html">Changelog</a></li><li><a href="./verticals-time-tracking-evv-evv-sync-integration.html">EVV Sync Integration Guide</a></li><li><a href="./verticals-time-tracking-evv-summary.html">Time Tracking & EVV Implementation Summary</a></li><li><a href="./web-implementation-summary.html">React Frontend Implementation Summary</a></li></ul></div><div class="nav-category">
      <h3>‚öôÔ∏è Implementation Details</h3>
      <ul><li><a href="./github-snyk-integration.html">Snyk Integration Policy</a></li><li><a href="./github-workflows-deployment-checklist.html">üöÄ Deployment Safety Checklist</a></li><li><a href="./agents.html">Agent Implementation Directives</a></li><li><a href="./api-cloudflare-workers-setup.html">Cloudflare Workers Setup (TODO)</a></li><li><a href="./auth-login-debugging.html">Authentication Login Failure Debugging Report</a></li><li><a href="./claude-0000-task-management-system-setup.html">Task 0000: Task Management System Setup</a></li><li><a href="./claude-0001-fix-caregiver-repository-type-errors.html">Task 0001: Fix Caregiver Repository Type Errors</a></li><li><a href="./claude-0003-create-state-compliance-service.html">Task 0003: Create State Compliance Service</a></li><li><a href="./claude-0004-implement-state-specific-evv-validation.html">Task 0004: Implement State-Specific EVV Validation</a></li><li><a href="./claude-0005-implement-visit-status-notifications.html">Task 0005: Implement Visit Status Notifications</a></li><li><a href="./claude-0006-build-clinical-documentation-foundation.html">Task 0006: Build Clinical Documentation Foundation</a></li><li><a href="./claude-0008-fix-evv-notification-recipients.html">Task 0008: Fix EVV Notification Recipients</a></li><li><a href="./claude-0009-integrate-family-engagement-with-services.html">Task 0009: Integrate Family Engagement with Client/Care Plan Services</a></li><li><a href="./claude-0010-implement-hhaexchange-evv-aggregator-integration.html">Task 0010: Implement HHAeXchange EVV Aggregator Integration</a></li><li><a href="./claude-0013-implement-holiday-filtering-in-schedule-service.html">Task 0013: Implement Holiday Filtering in Schedule Service</a></li><li><a href="./claude-0014-implement-mobile-push-notifications.html">Task 0014: Implement Mobile Push Notifications</a></li><li><a href="./claude-0015-implement-mobile-sync-status-screen.html">Task 0015: Implement Mobile Sync Status Screen</a></li><li><a href="./claude-0016-implement-mobile-e2e-testing.html">Task 0016: Implement Mobile E2E Testing for Critical Caregiver Workflows</a></li><li><a href="./claude-layer-1-input.html">Input</a></li><li><a href="./claude-layer-2-input-0003-mobile-offline-sync-status.html">Task 0003: Mobile Offline Sync Status Screen</a></li><li><a href="./claude-layer-2-input-0004-api-caregivers-me-endpoint.html">Task 0004: Caregiver Profile API Endpoint</a></li><li><a href="./claude-layer-2-input-0005-api-visits-my-visits-endpoint.html">Task 0005: My Visits API Endpoint</a></li><li><a href="./claude-layer-2-input-0006-mobile-visit-notes.html">Task 0006: Mobile Visit Notes Entry</a></li><li><a href="./claude-layer-2-input-0007-web-client-dashboard.html">Task 0007: Web Client Dashboard</a></li><li><a href="./claude-layer-2-input-0008-api-rate-limiting.html">Task 0008: API Rate Limiting Middleware</a></li><li><a href="./claude-layer-2-input-0009-error-monitoring-setup.html">Task 0009: Error Monitoring and Logging</a></li><li><a href="./claude-layer-2-input-0010-database-backup-strategy.html">Task 0010: Database Backup and Recovery</a></li><li><a href="./claude-layer-2-input-0011-mobile-biometric-auth.html">Task 0011: Mobile Biometric Authentication</a></li><li><a href="./claude-layer-2-input-0012-api-documentation.html">Task 0012: API Documentation with OpenAPI</a></li><li><a href="./claude-layer-2-input-0013-web-coordinator-onboarding.html">Task 0013: Coordinator Onboarding Flow</a></li><li><a href="./claude-layer-2-input-0014-mobile-push-notifications.html">Task 0014: Mobile Push Notifications</a></li><li><a href="./claude-layer-2-input-0015-testing-improvements.html">Task 0015: Test Coverage Improvements</a></li><li><a href="./claude-layer-2-instructions.html">INSTRUCTIONS</a></li><li><a href="./cli-tools-installed.html">‚úÖ CLI Tools Installed & Ready</a></li><li><a href="./contributing.html">Contributing to Care Commons</a></li><li><a href="./cors-fix.html">CORS Fix for Vercel Deployments</a></li><li><a href="./create-mobile-pr.html">Create Mobile Foundation PR</a></li><li><a href="./database-environments.html">Database Environment Management</a></li><li><a href="./dev-setup.html">Development Setup Guide</a></li><li><a href="./docs-api-documentation.html">API Documentation</a></li><li><a href="./docs-compliance-template-changelog.html">[STATE NAME] Regulatory Changelog</a></li><li><a href="./docs-compliance-template-implementation.html">[STATE NAME] Compliance Implementation Guide</a></li><li><a href="./docs-compliance-template-requirements.html">[STATE NAME] Home Healthcare Compliance Requirements</a></li><li><a href="./docs-compliance-template-test-scenarios.html">[STATE NAME] Compliance Test Scenarios</a></li><li><a href="./docs-compliance-florida-changelog.html">Florida Regulatory Changelog</a></li><li><a href="./docs-compliance-florida-requirements.html">Florida Home Healthcare Compliance Requirements</a></li><li><a href="./docs-compliance-ohio-changelog.html">Ohio Compliance Changelog</a></li><li><a href="./docs-compliance-ohio-implementation.html">Ohio Compliance Implementation Guide</a></li><li><a href="./docs-compliance-ohio-requirements.html">Ohio Home Healthcare Compliance Requirements</a></li><li><a href="./docs-compliance-ohio-test-scenarios.html">Ohio Compliance Test Scenarios</a></li><li class="more-docs">+ 59 more documents</li></ul></div>
      </nav>
    </aside>
    <main class="content">
      <div class="breadcrumbs">
      <a href="./index.html">Home</a> / 
      <span>‚öôÔ∏è Implementation Details</span> / 
      <span>Monitoring and Alerting Configuration</span>
    </div>
      <article class="markdown-content">
        <h1>Monitoring and Alerting Configuration</h1>
<p><strong>Version</strong>: 1.0
<strong>Last Updated</strong>: 2025-11-08
<strong>Owner</strong>: DevOps/Engineering Team</p>
<hr>
<h2>Overview</h2>
<p>This document outlines the monitoring and alerting strategy for the Care Commons platform, including configuration for Sentry, Prometheus metrics, and external monitoring services.</p>
<hr>
<h2>Alert Severity Levels</h2>
<table>
<thead>
<tr>
<th>Level</th>
<th>Response Time</th>
<th>Notification</th>
<th>Examples</th>
</tr>
</thead>
<tbody><tr>
<td><strong>CRITICAL</strong></td>
<td>Immediate</td>
<td>Page on-call + Slack + Email</td>
<td>Complete outage, security breach, data loss</td>
</tr>
<tr>
<td><strong>HIGH</strong></td>
<td>15 minutes</td>
<td>Slack + Email</td>
<td>High error rate, severe performance degradation</td>
</tr>
<tr>
<td><strong>MEDIUM</strong></td>
<td>1 hour</td>
<td>Slack</td>
<td>Moderate errors, minor performance issues</td>
</tr>
<tr>
<td><strong>LOW</strong></td>
<td>Next business day</td>
<td>Email only</td>
<td>Non-critical warnings, informational</td>
</tr>
</tbody></table>
<hr>
<h2>Sentry Alert Configuration</h2>
<h3>Error Rate Alerts</h3>
<p><strong>Critical Error Rate</strong> (CRITICAL):</p>
<pre><code>Alert Name: Critical Error Rate
Condition: Error rate &gt; 5% over 5 minutes
Notification: PagerDuty + Slack #incidents
</code></pre>
<p><strong>High Error Rate</strong> (HIGH):</p>
<pre><code>Alert Name: High Error Rate
Condition: Error rate &gt; 1% over 10 minutes
Notification: Slack #alerts + Email
</code></pre>
<p><strong>Configuration in Sentry</strong>:</p>
<ol>
<li>Go to Sentry ‚Üí Project Settings ‚Üí Alerts</li>
<li>Create New Alert ‚Üí &quot;Issues&quot;</li>
<li>Configure:<pre><code>When: An event is seen
If: percent of sessions affected by errors
Value: 5%
In: 5 minutes
Then: Send a notification to PagerDuty and #incidents
</code></pre>
</li>
</ol>
<h3>Specific Error Alerts</h3>
<p><strong>Authentication Failures</strong> (HIGH):</p>
<pre><code>Alert Name: High Authentication Failure Rate
Condition: &gt; 10 auth failures in 5 minutes from same IP
Notification: Slack #security + Email
Purpose: Detect brute force attacks
</code></pre>
<p><strong>Database Errors</strong> (CRITICAL):</p>
<pre><code>Alert Name: Database Connection Failures
Condition: Any database connection error
Notification: PagerDuty + Slack #incidents
Purpose: Immediate notification of database issues
</code></pre>
<p><strong>Security Errors</strong> (CRITICAL):</p>
<pre><code>Alert Name: Security Violations
Condition: Any error with tag &quot;security&quot;
Notification: PagerDuty + Slack #security
Purpose: Immediate security incident response
</code></pre>
<h3>Performance Alerts</h3>
<p><strong>Slow Transactions</strong> (MEDIUM):</p>
<pre><code>Alert Name: Slow API Responses
Condition: p95 response time &gt; 1000ms for 10 minutes
Notification: Slack #alerts
Purpose: Performance degradation detection
</code></pre>
<p><strong>Configuration</strong>:</p>
<ol>
<li>Sentry ‚Üí Performance ‚Üí Alerts</li>
<li>Create Alert:<pre><code>When: A performance metric is met
Metric: p95(transaction.duration)
Threshold: &gt; 1000ms
Time period: 10 minutes
Then: Notify #alerts
</code></pre>
</li>
</ol>
<h3>Sentry Alert Rules (JSON Configuration)</h3>
<pre><code class="language-json">{
  &quot;alerts&quot;: [
    {
      &quot;name&quot;: &quot;Critical Error Rate&quot;,
      &quot;projects&quot;: [&quot;care-commons&quot;],
      &quot;conditions&quot;: [
        {
          &quot;id&quot;: &quot;sentry.rules.conditions.event_frequency.EventFrequencyPercentCondition&quot;,
          &quot;interval&quot;: &quot;5m&quot;,
          &quot;value&quot;: 5.0,
          &quot;comparisonType&quot;: &quot;percent&quot;
        }
      ],
      &quot;actions&quot;: [
        {
          &quot;id&quot;: &quot;sentry.integrations.pagerduty.notify_action.PagerDutyNotifyServiceAction&quot;,
          &quot;service&quot;: &quot;production-oncall&quot;
        },
        {
          &quot;id&quot;: &quot;sentry.integrations.slack.notify_action.SlackNotifyServiceAction&quot;,
          &quot;workspace&quot;: &quot;care-commons&quot;,
          &quot;channel&quot;: &quot;#incidents&quot;
        }
      ]
    },
    {
      &quot;name&quot;: &quot;Database Errors&quot;,
      &quot;projects&quot;: [&quot;care-commons&quot;],
      &quot;conditions&quot;: [
        {
          &quot;id&quot;: &quot;sentry.rules.conditions.tagged_event.TaggedEventCondition&quot;,
          &quot;key&quot;: &quot;error.type&quot;,
          &quot;match&quot;: &quot;co&quot;,
          &quot;value&quot;: &quot;database&quot;
        }
      ],
      &quot;actions&quot;: [
        {
          &quot;id&quot;: &quot;sentry.integrations.slack.notify_action.SlackNotifyServiceAction&quot;,
          &quot;workspace&quot;: &quot;care-commons&quot;,
          &quot;channel&quot;: &quot;#incidents&quot;
        }
      ]
    }
  ]
}
</code></pre>
<hr>
<h2>Prometheus Metrics Alerts</h2>
<h3>Alert Manager Configuration</h3>
<p><strong>alertmanager.yml</strong>:</p>
<pre><code class="language-yaml">global:
  resolve_timeout: 5m
  slack_api_url: &#39;https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK&#39;

route:
  group_by: [&#39;alertname&#39;, &#39;cluster&#39;, &#39;service&#39;]
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 12h
  receiver: &#39;slack-notifications&#39;
  routes:
    - match:
        severity: critical
      receiver: &#39;pagerduty-critical&#39;
    - match:
        severity: high
      receiver: &#39;slack-alerts&#39;

receivers:
  - name: &#39;slack-notifications&#39;
    slack_configs:
      - channel: &#39;#monitoring&#39;
        text: &#39;{{ range .Alerts }}{{ .Annotations.description }}{{ end }}&#39;
        title: &#39;{{ .GroupLabels.alertname }}&#39;

  - name: &#39;slack-alerts&#39;
    slack_configs:
      - channel: &#39;#alerts&#39;
        text: &#39;{{ range .Alerts }}{{ .Annotations.description }}{{ end }}&#39;
        title: &#39;{{ .GroupLabels.alertname }}&#39;
        send_resolved: true

  - name: &#39;pagerduty-critical&#39;
    pagerduty_configs:
      - service_key: &#39;YOUR_PAGERDUTY_SERVICE_KEY&#39;
</code></pre>
<h3>Prometheus Alert Rules</h3>
<p><strong>prometheus-alerts.yml</strong>:</p>
<pre><code class="language-yaml">groups:
  - name: api_alerts
    interval: 30s
    rules:
      # High Error Rate
      - alert: HighErrorRate
        expr: |
          (
            sum(rate(http_requests_total{status=~&quot;5..&quot;}[5m]))
            /
            sum(rate(http_requests_total[5m]))
          ) &gt; 0.05
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: &quot;High error rate detected&quot;
          description: &quot;Error rate is {{ $value | humanizePercentage }} (threshold: 5%)&quot;

      # API Response Time
      - alert: SlowAPIResponses
        expr: |
          histogram_quantile(0.95,
            sum(rate(http_request_duration_seconds_bucket[5m])) by (le)
          ) &gt; 1.0
        for: 10m
        labels:
          severity: high
        annotations:
          summary: &quot;Slow API responses&quot;
          description: &quot;95th percentile response time is {{ $value }}s&quot;

      # Database Query Performance
      - alert: SlowDatabaseQueries
        expr: |
          histogram_quantile(0.95,
            sum(rate(db_query_duration_seconds_bucket[5m])) by (le)
          ) &gt; 0.2
        for: 10m
        labels:
          severity: medium
        annotations:
          summary: &quot;Slow database queries&quot;
          description: &quot;95th percentile query time is {{ $value }}s&quot;

  - name: availability_alerts
    interval: 30s
    rules:
      # Service Down
      - alert: ServiceDown
        expr: up == 0
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: &quot;Service is down&quot;
          description: &quot;{{ $labels.instance }} has been down for more than 2 minutes&quot;

      # Database Connection Issues
      - alert: DatabaseConnectionFailures
        expr: increase(db_connection_errors_total[5m]) &gt; 5
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: &quot;Database connection failures&quot;
          description: &quot;{{ $value }} database connection errors in last 5 minutes&quot;

  - name: performance_alerts
    interval: 1m
    rules:
      # High Request Rate
      - alert: HighRequestRate
        expr: sum(rate(http_requests_total[1m])) &gt; 1000
        for: 5m
        labels:
          severity: medium
        annotations:
          summary: &quot;Unusually high request rate&quot;
          description: &quot;Request rate is {{ $value }} req/s (possible attack)&quot;

      # Mobile Sync Failures
      - alert: MobileSyncFailures
        expr: |
          (
            sum(rate(mobile_sync_failure_total[5m]))
            /
            sum(rate(mobile_sync_total[5m]))
          ) &gt; 0.1
        for: 10m
        labels:
          severity: high
        annotations:
          summary: &quot;High mobile sync failure rate&quot;
          description: &quot;Sync failure rate is {{ $value | humanizePercentage }}&quot;

  - name: business_alerts
    interval: 5m
    rules:
      # No Visits Created (possible issue)
      - alert: NoVisitsCreated
        expr: increase(visits_created_total[1h]) == 0
        for: 2h
        labels:
          severity: medium
        annotations:
          summary: &quot;No visits created in last hour&quot;
          description: &quot;Possible issue with visit creation functionality&quot;
</code></pre>
<hr>
<h2>Uptime Monitoring</h2>
<h3>Recommended Service: UptimeRobot or Pingdom</h3>
<p><strong>Endpoints to Monitor</strong>:</p>
<ol>
<li><p><strong>Health Check</strong> (CRITICAL):</p>
<pre><code>URL: https://your-domain.com/health
Interval: 1 minute
Expected: 200 OK
Alert: Immediate (PagerDuty + Slack)
</code></pre>
</li>
<li><p><strong>API Availability</strong> (HIGH):</p>
<pre><code>URL: https://your-domain.com/api/health
Interval: 5 minutes
Expected: 200 OK
Alert: Slack #alerts
</code></pre>
</li>
<li><p><strong>Web App</strong> (MEDIUM):</p>
<pre><code>URL: https://your-domain.com
Interval: 5 minutes
Expected: 200 OK
Alert: Email + Slack
</code></pre>
</li>
</ol>
<h3>UptimeRobot Configuration Example</h3>
<pre><code>Monitor Type: HTTPS
Friendly Name: Care Commons API Health Check
URL: https://your-domain.com/health
Monitoring Interval: 1 minute
Monitor Timeout: 30 seconds
Alert Contacts:
  - Slack Integration (care-commons-alerts)
  - PagerDuty Integration (production-oncall)
  - Email (devops@your-domain.com)
</code></pre>
<hr>
<h2>Log Monitoring</h2>
<h3>Vercel Logs</h3>
<p><strong>Access</strong>:</p>
<pre><code>Vercel Dashboard ‚Üí Project ‚Üí Logs
Filter by severity: Error, Warning
</code></pre>
<p><strong>Automated Log Analysis</strong> (Optional - Datadog/LogDNA):</p>
<pre><code>Alert on:
- Error log rate &gt; 10/minute
- Specific error patterns:
  - &quot;Database connection failed&quot;
  - &quot;Authentication failed&quot;
  - &quot;Rate limit exceeded&quot;
  - &quot;ECONNREFUSED&quot;
</code></pre>
<hr>
<h2>Database Monitoring (Neon)</h2>
<h3>Neon Dashboard Metrics</h3>
<p><strong>Monitor via Neon Console</strong>:</p>
<ol>
<li>Connection count (alert if &gt; 80% of max)</li>
<li>Query duration (alert if p95 &gt; 200ms)</li>
<li>Active queries (alert if &gt; 50 concurrent)</li>
<li>Storage usage (alert at 80% capacity)</li>
</ol>
<p><strong>Alerts to Configure</strong>:</p>
<ol>
<li><p><strong>High Connection Count</strong> (MEDIUM):</p>
<pre><code>Threshold: &gt; 16 connections (80% of 20 max)
Action: Scale connection pool or investigate connection leaks
</code></pre>
</li>
<li><p><strong>Long-Running Queries</strong> (HIGH):</p>
<pre><code>Threshold: Query running &gt; 30 seconds
Action: Investigate and potentially kill query
</code></pre>
</li>
<li><p><strong>Storage Usage</strong> (MEDIUM):</p>
<pre><code>Threshold: &gt; 80% of allocated storage
Action: Plan for storage upgrade
</code></pre>
</li>
</ol>
<hr>
<h2>Alert Notification Channels</h2>
<h3>Slack Integration</h3>
<p><strong>Channels</strong>:</p>
<ul>
<li><code>#incidents</code>: CRITICAL alerts (PagerDuty, major outages)</li>
<li><code>#alerts</code>: HIGH priority alerts</li>
<li><code>#monitoring</code>: General monitoring, metrics</li>
<li><code>#security</code>: Security-related alerts</li>
</ul>
<p><strong>Slack Webhook Configuration</strong>:</p>
<pre><code class="language-bash"># In Vercel environment variables or secrets manager
SLACK_WEBHOOK_INCIDENTS=https://hooks.slack.com/services/XXX/YYY/ZZZ
SLACK_WEBHOOK_ALERTS=https://hooks.slack.com/services/AAA/BBB/CCC
SLACK_WEBHOOK_SECURITY=https://hooks.slack.com/services/DDD/EEE/FFF
</code></pre>
<h3>PagerDuty Integration</h3>
<p><strong>Services</strong>:</p>
<ul>
<li><code>production-oncall</code>: CRITICAL production incidents</li>
<li><code>database-oncall</code>: Database-specific issues</li>
</ul>
<p><strong>Escalation Policy</strong>:</p>
<pre><code>Level 1: Primary On-Call (notify immediately)
Level 2: Secondary On-Call (escalate after 15 min)
Level 3: Engineering Manager (escalate after 30 min)
</code></pre>
<h3>Email Alerts</h3>
<p><strong>Distribution Lists</strong>:</p>
<ul>
<li><code>alerts@your-domain.com</code>: All alerts</li>
<li><code>oncall@your-domain.com</code>: On-call rotation</li>
<li><code>devops@your-domain.com</code>: Infrastructure alerts</li>
</ul>
<hr>
<h2>Alert Response Procedures</h2>
<h3>CRITICAL Alert Response</h3>
<p><strong>Immediate Actions</strong> (&lt; 5 minutes):</p>
<ol>
<li>Acknowledge alert in PagerDuty</li>
<li>Join incident bridge call (if configured)</li>
<li>Post in #incidents: &quot;Investigating [alert name]&quot;</li>
<li>Check system status (health endpoints, Sentry, Vercel)</li>
<li>Determine if rollback needed (see ROLLBACK_PROCEDURES.md)</li>
</ol>
<p><strong>If Service Down</strong>:</p>
<ol>
<li>Check Vercel status page</li>
<li>Verify DNS resolution</li>
<li>Test health endpoints</li>
<li>Review recent deployments</li>
<li>Execute rollback if needed</li>
</ol>
<p><strong>If Database Issues</strong>:</p>
<ol>
<li>Check Neon status page</li>
<li>Review connection pool metrics</li>
<li>Check for long-running queries</li>
<li>Verify database connectivity</li>
<li>Consider read-only mode if write issues</li>
</ol>
<h3>HIGH Alert Response</h3>
<p><strong>Actions</strong> (&lt; 15 minutes):</p>
<ol>
<li>Post in #alerts: &quot;Investigating [alert name]&quot;</li>
<li>Review metrics and logs</li>
<li>Identify affected users/scope</li>
<li>Determine fix strategy (hotfix vs. rollback)</li>
<li>Implement fix</li>
<li>Monitor for resolution</li>
</ol>
<h3>MEDIUM Alert Response</h3>
<p><strong>Actions</strong> (&lt; 1 hour):</p>
<ol>
<li>Create ticket for investigation</li>
<li>Review trends (is it getting worse?)</li>
<li>Schedule fix (immediate or next sprint)</li>
<li>Update team on findings</li>
</ol>
<hr>
<h2>Alert Tuning</h2>
<h3>Prevent Alert Fatigue</h3>
<p><strong>Review Quarterly</strong>:</p>
<ul>
<li>Alert frequency (too many false positives?)</li>
<li>Alert thresholds (too sensitive or not sensitive enough?)</li>
<li>Notification channels (right people getting alerts?)</li>
<li>Response times (are we meeting SLAs?)</li>
</ul>
<p><strong>Best Practices</strong>:</p>
<ul>
<li>‚úÖ Alert on symptoms, not causes</li>
<li>‚úÖ Make alerts actionable</li>
<li>‚úÖ Include context in alert messages</li>
<li>‚úÖ Set appropriate thresholds (not too sensitive)</li>
<li>‚úÖ Use alert grouping to reduce noise</li>
<li>‚ùå Don&#39;t alert on every error</li>
<li>‚ùå Don&#39;t send all alerts to same channel</li>
<li>‚ùå Don&#39;t ignore alerts (tune or remove)</li>
</ul>
<hr>
<h2>Testing Alerts</h2>
<h3>Monthly Alert Test</h3>
<p><strong>Procedure</strong>:</p>
<ol>
<li><p><strong>Test Sentry Alerts</strong>:</p>
<pre><code class="language-javascript">// Trigger test error in staging
throw new Error(&#39;Test alert - please ignore&#39;);
</code></pre>
</li>
<li><p><strong>Test Uptime Monitoring</strong>:</p>
<ul>
<li>Temporarily disable health endpoint in staging</li>
<li>Verify alert received</li>
<li>Re-enable endpoint</li>
</ul>
</li>
<li><p><strong>Test PagerDuty</strong>:</p>
<ul>
<li>Send test page</li>
<li>Verify received by on-call</li>
<li>Verify escalation policy works</li>
</ul>
</li>
<li><p><strong>Test Slack Webhooks</strong>:</p>
<pre><code class="language-bash">curl -X POST -H &#39;Content-type: application/json&#39; \
  --data &#39;{&quot;text&quot;:&quot;Test alert - monitoring system check&quot;}&#39; \
  $SLACK_WEBHOOK_URL
</code></pre>
</li>
</ol>
<hr>
<h2>Monitoring Dashboard</h2>
<h3>Recommended Tools</h3>
<ol>
<li><p><strong>Grafana</strong> (for Prometheus metrics):</p>
<ul>
<li>Real-time metrics visualization</li>
<li>Custom dashboards</li>
<li>Alert visualization</li>
</ul>
</li>
<li><p><strong>Vercel Analytics</strong>:</p>
<ul>
<li>Built-in request analytics</li>
<li>Performance metrics</li>
<li>No configuration needed</li>
</ul>
</li>
<li><p><strong>Sentry Performance</strong>:</p>
<ul>
<li>Transaction traces</li>
<li>Error tracking with context</li>
<li>Release tracking</li>
</ul>
</li>
</ol>
<h3>Key Metrics Dashboard</h3>
<p><strong>Panels to Include</strong>:</p>
<ol>
<li>Request rate (req/s)</li>
<li>Response time (p50, p95, p99)</li>
<li>Error rate (%)</li>
<li>Database query time (p95)</li>
<li>Active users</li>
<li>Top errors (last hour)</li>
<li>Deployment timeline</li>
</ol>
<hr>
<h2>Appendix: Alert Checklist</h2>
<p><strong>Initial Setup</strong>:</p>
<ul>
<li><input disabled="" type="checkbox"> Sentry project created and DSN configured</li>
<li><input disabled="" type="checkbox"> Sentry alert rules configured</li>
<li><input disabled="" type="checkbox"> Prometheus metrics endpoint exposed</li>
<li><input disabled="" type="checkbox"> Alert Manager configured (if using Prometheus)</li>
<li><input disabled="" type="checkbox"> Uptime monitoring configured (UptimeRobot/Pingdom)</li>
<li><input disabled="" type="checkbox"> Slack webhooks configured</li>
<li><input disabled="" type="checkbox"> PagerDuty service created</li>
<li><input disabled="" type="checkbox"> PagerDuty escalation policy configured</li>
<li><input disabled="" type="checkbox"> Email distribution lists created</li>
<li><input disabled="" type="checkbox"> Alert response procedures documented</li>
<li><input disabled="" type="checkbox"> Team trained on alert response</li>
<li><input disabled="" type="checkbox"> Test alerts sent and verified</li>
</ul>
<p><strong>Quarterly Review</strong>:</p>
<ul>
<li><input disabled="" type="checkbox"> Review alert frequency and false positive rate</li>
<li><input disabled="" type="checkbox"> Update alert thresholds based on traffic growth</li>
<li><input disabled="" type="checkbox"> Test all alert channels</li>
<li><input disabled="" type="checkbox"> Update on-call rotation</li>
<li><input disabled="" type="checkbox"> Review alert response times</li>
<li><input disabled="" type="checkbox"> Update alert documentation</li>
</ul>
<hr>
<p><strong>Document Version</strong>: 1.0
<strong>Last Review</strong>: 2025-11-08
<strong>Next Review</strong>: 2026-02-08 (Quarterly)
<strong>Last Alert Test</strong>: [Schedule first test]</p>

      </article>
      <footer class="content-footer">
        <p>
          <strong>Care Commons</strong> - Shared care software, community owned<br>
          Brought to you by <a href="https://neighborhoodlab.org" target="_blank">Neighborhood Lab</a>
        </p>
      </footer>
    </main>
  </div>
</body>
</html>